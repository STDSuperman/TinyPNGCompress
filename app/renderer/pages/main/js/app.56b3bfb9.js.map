{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/img-container.vue?5bdb","webpack:///./src/App.vue?bff9","webpack:///./src/store/mutations.js","webpack:///./src/store/index.js","webpack:///./src/components/img-container.vue?9a7d","webpack:///./src/App.vue?c650","webpack:///./src/components/user-config.vue?ad8f","webpack:///./src/components/img-container.vue?0365","webpack:///./src/components/file-list.vue?6680","webpack:///./src/App.vue?0ab4","webpack:///./src/components/user-config.vue?e67c","webpack:///./src/components/img-container.vue?3e15","webpack:///./src/components/user-config.vue?2d91","webpack:///./src/App.vue","webpack:///./src/components/img-container.vue","webpack:///./src/components/user-config.vue","webpack:///./src/components/user-config.vue?918b","webpack:///./src/components/file-list.vue?9c99","webpack:///./src/main.ts","webpack:///./src/App.vue?7cdf","webpack:///./src/assets/logo.png","webpack:///./src/assets/upload.png","webpack:///./src/components/file-list.vue?da8c","webpack:///./src/components/img-container.vue?6a4a","webpack:///./src/components/file-list.vue?f38b","webpack:///./src/components/file-list.vue","webpack:///./src/utils/index.js","webpack:///./src/components/user-config.vue?6cbb"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","component","Store","require","store","SET_CACHE_FOLDER","SET_REPLACE_STATUS","SET_API_KEY","ADD_FILE_INFO","CHANGE_FILE_INFO","SET_CACHE_STATUS","LOAD_USER_CONFIG","state","userConfig","cacheDir","replaceStatus","undefined","cacheStatus","apiKey","set","fileInfo","cb","fileList","payload","currentFilePos","target","status","Vue","$set","failMap","getters","generatorGetters","mutations","actions","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","on","openModel","_v","_s","btnText","model","callback","$$v","showModel","expression","slot","_l","item","index","getUrl","filename","message","checkIsShowLoading","isCache","needRetryErrorItem","retryAllError","staticRenderFns","ref","selectFile","fileChange","nativeOn","$event","openFileSelect","cacheDirShowText","setApiKey","registerApiKey","changeReplaceStatus","changeNeedCacheStatus","App","Component","components","ImgContainer","UserConfig","Divider","FileList","tinify","props","path","fs","dirExist","mkdirSync","cacheCompressedDir","resolve","cacheOriginaldDir","hash","resultData","sourceData","currentFileInfo","pathModule","ext","originalPicPath","currentHash","caculateFileHash","compressedPicPath","writeFileSync","replace","proportion","Math","ceil","reduceSize","url","toString","readdirSync","find","parse","cacheFilePath","retryIndex","readFileSync","checkCache","base","fromBuffer","toBuffer","err","indexOf","ConnectionError","ServerError","ClientError","AccountError","handleCompressed","$refs","file","click","$Message","warning","e","files","compressImage","success","forEach","isFolder","handleFolder","isSpecificImage","error","console","log","cardContainer","document","getElementsByClassName","container","addEventListener","preventDefault","classList","remove","itemList","dataTransfer","stopPropagation","dragEnterHandler","add","dragLeaveHandler","$root","$on","init","initDropTarget","State","Mutation","Card","watch","val","remote","dialog","showOpenDialog","properties","filePaths","open","ICell","Cell","ISwitch","Switch","CellGroup","Input","Upload","Button","Tag","use","config","productionTip","h","$mount","failList","keys","$emit","allReduceSize","Icon","Spin","Poptip","crypto","buffer","fsHash","createHash","update","digest","idx","lastIndexOf","imageReg","test","existsSync","Array","toUpperCase"],"mappings":"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","file":"js/app.56b3bfb9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./img-container.vue?vue&type=style&index=0&id=70197ea6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./img-container.vue?vue&type=style&index=0&id=70197ea6&lang=scss&scoped=true&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=00072df4&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nconst Store = window.require('electron-store');\r\nconst store = new Store();\r\n\r\nexport const SET_CACHE_FOLDER = 'SET_CACHE_FOLDER';\r\nexport const SET_REPLACE_STATUS = 'SET_REPLACE_STATUS';\r\nexport const SET_API_KEY = 'SET_API_KEY';\r\nexport const ADD_FILE_INFO = 'ADD_FILE_INFO';\r\nexport const CHANGE_FILE_INFO = 'CHANGE_FILE_INFO';\r\nexport const SET_CACHE_STATUS = 'SET_CACHE_STATUS';\r\nexport const LOAD_USER_CONFIG = 'LOAD_USER_CONFIG';\r\n\r\nexport default {\r\n    [LOAD_USER_CONFIG](state) {\r\n        const userConfig = store.get(\"userConfig\") || {};\r\n        state.userConfig = userConfig;\r\n        state.cacheDir = userConfig.cacheDir || './TinyPNGCacheDir';\r\n        state.replaceStatus = userConfig.replaceStatus === undefined ? true : userConfig.replaceStatus;\r\n        state.cacheStatus = userConfig.cacheStatus === undefined ? true : userConfig.cacheStatus;\r\n        state.apiKey = userConfig.apiKey || 'Tcdl0JRbM7tsfplqJBb9Z69Dvdk1dSHP';\r\n    },\r\n    [SET_CACHE_FOLDER](state, cacheDir) {\r\n        state.cacheDir = cacheDir;\r\n        store.set('userConfig.cacheDir', cacheDir);\r\n    },\r\n    [SET_REPLACE_STATUS](state, replaceStatus) {\r\n        state.replaceStatus = replaceStatus;\r\n        store.set('userConfig.replaceStatus', replaceStatus);\r\n    },\r\n    [SET_CACHE_STATUS](state, cacheStatus) {\r\n        state.cacheStatus = cacheStatus;\r\n        store.set('userConfig.cacheStatus', cacheStatus);\r\n    },\r\n    [SET_API_KEY](state, apiKey) {\r\n        state.apiKey = apiKey;\r\n        store.set('userConfig.apiKey', apiKey);\r\n    },\r\n    [ADD_FILE_INFO](state, { fileInfo, cb }) {\r\n        cb(state.fileList.length);\r\n        state.fileList.push(fileInfo);\r\n    },\r\n    [CHANGE_FILE_INFO](state, payload) {\r\n        let currentFilePos = payload.currentFilePos;\r\n        const target = state.fileList[currentFilePos];\r\n        if (!target) { return }\r\n        if (payload.status === 2) {\r\n            Vue.prototype.$set(state.failMap, currentFilePos, true)\r\n        } else {\r\n            state.failMap[currentFilePos] && (delete state.failMap[currentFilePos]);// 如果重试成功则从失败列表中删除\r\n        }\r\n        for (let i in payload) {\r\n            if (Object.prototype.hasOwnProperty.call(payload, i)) {\r\n                target[i] = payload[i];\r\n            }\r\n        }\r\n        state.fileList.splice(currentFilePos, 1, target);\r\n    }\r\n}","import mutations from './mutations';\r\nimport actions from './actions'\r\nimport { generatorGetters } from '../utils/index';\r\n\r\nconst state = {\r\n    cacheDir: '',\r\n    replaceStatus: true,\r\n    apiKey: '',\r\n    fileList: [],\r\n    failMap: {},\r\n    cacheStatus: true,\r\n    userConfig: {}\r\n}\r\nexport default {\r\n    state,\r\n    getters: generatorGetters(state),\r\n    mutations,\r\n    actions\r\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./img-container.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./img-container.vue?vue&type=style&index=1&lang=scss&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import { render, staticRenderFns } from \"./user-config.vue?vue&type=template&id=51e56bbc&scoped=true&\"\nimport script from \"./user-config.vue?vue&type=script&lang=ts&\"\nexport * from \"./user-config.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./user-config.vue?vue&type=style&index=0&id=51e56bbc&lang=scss&scoped=true&\"\nimport style1 from \"./user-config.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"51e56bbc\",\n  null\n  \n)\n\nexport default component.exports","import { render, staticRenderFns } from \"./img-container.vue?vue&type=template&id=70197ea6&scoped=true&\"\nimport script from \"./img-container.vue?vue&type=script&lang=ts&\"\nexport * from \"./img-container.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./img-container.vue?vue&type=style&index=0&id=70197ea6&lang=scss&scoped=true&\"\nimport style1 from \"./img-container.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70197ea6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"file-list\"},[_c('Button',{staticStyle:{\"margin\":\"10px\"},attrs:{\"type\":\"info\",\"long\":\"\",\"icon\":\"md-bulb\",\"size\":\"large\"},on:{\"click\":_vm.openModel}},[_vm._v(_vm._s(_vm.btnText))]),_c('Modal',{attrs:{\"width\":\"360\"},model:{value:(_vm.showModel),callback:function ($$v) {_vm.showModel=$$v},expression:\"showModel\"}},[_c('p',{staticStyle:{\"color\":\"#2d8cf0\",\"text-align\":\"center\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('Icon',{attrs:{\"type\":\"ios-inforremation-circle\"}}),_c('span',[_vm._v(\"任务列表\")])],1),(_vm.fileList.length)?_c('div',{staticClass:\"task-list\"},_vm._l((_vm.fileList),function(item,index){return _c('Card',{key:index,staticStyle:{\"width\":\"98%\",\"height\":\"78px\",\"margin\":\"10px 0\"}},[_c('div',{staticClass:\"task-item\"},[_c('div',{staticClass:\"left\"},[_c('img',{staticClass:\"cover\",attrs:{\"src\":_vm.getUrl(item),\"alt\":\"\",\"srcset\":\"\"}}),_c('div',{staticClass:\"msg-box\"},[_c('div',{staticClass:\"filename\"},[_vm._v(_vm._s(item.filename))]),_c('div',{staticClass:\"desc\"},[_vm._v(_vm._s(item.message || 'loading...'))])])]),_c('div',{staticClass:\"right\"},[_c('Spin',{attrs:{\"fix\":\"\"}},[(_vm.checkIsShowLoading(item))?_c('Icon',{staticClass:\"demo-spin-icon-load\",attrs:{\"type\":\"ios-loading\",\"size\":\"18\"}}):_c('section',[(item.isCache || item.status === 1)?_c('Icon',{attrs:{\"type\":\"ios-checkmark\",\"size\":\"30\"}}):_c('Icon',{attrs:{\"type\":\"ios-close\",\"color\":\"#ed4014\",\"size\":\"30\"}})],1)],1)],1)])])}),1):_c('div',{staticClass:\"empty\"},[_c('Icon',{attrs:{\"type\":\"logo-octocat\"}}),_c('p',[_vm._v(\"空空如也\")])],1),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('Button',{attrs:{\"disabled\":!_vm.needRetryErrorItem,\"type\":\"warning\",\"size\":\"large\",\"long\":\"\"},on:{\"click\":_vm.retryAllError}},[_vm._v(\"重新压缩所有失败项\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--14-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--14-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-config.vue?vue&type=style&index=0&id=51e56bbc&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-config.vue?vue&type=style&index=0&id=51e56bbc&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"img-container\"},[_c('Card',{staticStyle:{\"width\":\"98%\",\"height\":\"250px\"}},[_c('div',{staticStyle:{\"text-align\":\"center\"}},[_c('div',{ref:\"container\",staticClass:\"drop-area\",on:{\"click\":_vm.selectFile}},[_c('input',{ref:\"file\",staticClass:\"img-select\",attrs:{\"type\":\"file\",\"multiple\":\"\",\"accept\":\"image/*\"},on:{\"change\":_vm.fileChange}}),_c('div',{staticClass:\"hint-area\"},[_c('img',{staticClass:\"upload-icon\",attrs:{\"src\":require(\"../assets/upload.png\"),\"alt\":\"\"}}),_c('p',[_vm._v(\"请拖拽PNG/JPG文件（支持文件夹）到这里哦！\")])])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"user-config\"},[_c('CellGroup',[_c('ICell',{attrs:{\"title\":\"原图与缓存目录\"}},[_c('Tag',{staticStyle:{\"max-width\":\"250px\",\"text-overflow\":\"ellipsis\"},attrs:{\"slot\":\"extra\",\"color\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.openFileSelect($event)}},slot:\"extra\"},[_vm._v(_vm._s(_vm.cacheDirShowText))])],1),_c('ICell',{attrs:{\"title\":\"API KEY\"}},[_c('Input',{staticStyle:{\"width\":\"300px\"},attrs:{\"slot\":\"extra\",\"value\":_vm.apiKey,\"search\":\"\",\"enter-button\":\"注册\",\"type\":\"text\",\"placeholder\":\"请输入您的api key\"},on:{\"on-change\":_vm.setApiKey,\"on-search\":_vm.registerApiKey},slot:\"extra\"})],1),_c('ICell',{attrs:{\"title\":\"是否替换原图\"}},[_c('ISwitch',{attrs:{\"slot\":\"extra\",\"value\":_vm.replaceStatus},on:{\"on-change\":_vm.changeReplaceStatus},slot:\"extra\"})],1),_c('ICell',{attrs:{\"title\":\"是否开启压缩与原图缓存\"}},[_c('ISwitch',{attrs:{\"slot\":\"extra\",\"value\":_vm.cacheStatus},on:{\"on-change\":_vm.changeNeedCacheStatus},slot:\"extra\"})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from \"vue-property-decorator\";\nimport ImgContainer from \"./components/img-container.vue\";\nimport UserConfig from \"./components/user-config.vue\";\nimport FileList from \"./components/file-list.vue\";\nimport { Divider } from \"view-design\";\n\n@Component({\n    components: {\n        ImgContainer,\n        UserConfig,\n        Divider,\n        FileList\n    }\n})\nexport default class App extends Vue {}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nimport { isSpecificImage, isFolder, dirExist, caculateFileHash } from '../utils/index.js';\r\nimport { Card } from 'view-design';\r\nimport { State, Mutation } from 'vuex-class';\r\nconst tinify = window.require('tinify');\r\ndeclare var window: any;\r\n\r\n@Component({\r\n\tcomponents: { Card },\r\n\twatch: {\r\n\t\tcacheDir(val) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tval && this.init();\r\n\t\t}\r\n\t}\r\n})\r\nexport default class ImgContainer extends Vue {\r\n\tfs: any;\r\n\ttinify: any;\r\n\t$Message: any;\r\n\t@State apiKey: string;\r\n\t@State cacheDir: string;\r\n\t@State replaceStatus: any;\r\n\t@State cacheStatus: any;\r\n\t@Mutation ADD_FILE_INFO: any;\r\n\t@Mutation CHANGE_FILE_INFO: any;\r\n\tcacheCompressedDir: string; // 压缩图目录\r\n\tcacheOriginaldDir:string; // 原图目录\r\n\tconstructor(props: any) {\r\n\t\tsuper(props);\r\n\t}\r\n\t$refs: {\r\n\t\tfile: HTMLFormElement;\r\n\t\tcontainer: HTMLFormElement;\r\n\t};\r\n\tinit() {\r\n\t\tif (!this.cacheDir) return;\r\n\t\tconst path = window.require('path');\r\n\t\tthis.fs = window.require('fs');\r\n\t\t// 判断缓存目录是否存在\r\n\t\tif (!dirExist(this.cacheDir)) {\r\n\t\t\tthis.fs.mkdirSync(this.cacheDir);\r\n\t\t}\r\n\t\tthis.cacheCompressedDir = path.resolve(this.cacheDir, 'compressed-picture'); // 创建压缩完的文件缓存目录\r\n\t\tthis.cacheOriginaldDir = path.resolve(this.cacheDir, 'original-picture'); // 创建压缩文件原图的文件目录\r\n\t\t!dirExist(this.cacheCompressedDir) && this.fs.mkdirSync(this.cacheCompressedDir);\r\n\t\t!dirExist(this.cacheOriginaldDir) && this.fs.mkdirSync(this.cacheOriginaldDir);\r\n\t}\r\n\t// 拿到压缩结果进行一系列处理\r\n\thandleCompressed(hash: string, resultData: any, sourceData: any, path: string, fileInfo: any, currentFileInfo: any) {\r\n\t\tconst pathModule = window.require('path');\r\n\t\tconst { name, ext } = fileInfo;\r\n\t\tif (this.cacheStatus) {\r\n\t\t\tconst originalPicPath = pathModule.resolve(this.cacheOriginaldDir, name + '-tiny-' + hash + ext); // 原图缓存路径\r\n\t\t\tconst currentHash = caculateFileHash(resultData);\r\n\t\t\tconst compressedPicPath = pathModule.resolve(this.cacheCompressedDir, currentHash + ext); // 压缩图缓存路径\r\n\t\t\tthis.fs.writeFileSync(compressedPicPath, resultData); // 缓存压缩图\r\n\t\t\tthis.fs.writeFileSync(originalPicPath, sourceData); // 缓存原图\r\n\t\t}\r\n\t\tif (this.replaceStatus) {\r\n\t\t\tthis.fs.writeFileSync(path, resultData); // 替换目标图\r\n\t\t} else {\r\n\t\t\tthis.fs.writeFileSync(path.replace(/\\./g, '') + '-tiny-' + ext, resultData); // 在目标图位置放置图片\r\n\t\t}\r\n\t\tconst proportion = Math.ceil(((sourceData.length - resultData.length) / sourceData.length) * 100);\r\n\t\tconst reduceSize = sourceData.length - resultData.length;\r\n\t\tcurrentFileInfo.status = 1;\r\n\t\tcurrentFileInfo.reduceSize = reduceSize;\r\n\t\tcurrentFileInfo.message = `- ${reduceSize / 1000} k（${-proportion}%）`;\r\n\t\tcurrentFileInfo.url = resultData.toString('base64');\r\n\t\tthis.CHANGE_FILE_INFO(currentFileInfo);\r\n\t\t// this.$Message.success(`压缩${ base }成功，减少尺寸${ reduceSize }`);\r\n\t}\r\n\tcheckCache(hash: string) {\r\n\t\tconst fileList = this.fs.readdirSync(this.cacheCompressedDir);\r\n\t\tconst pathModule = window.require(\"path\");\r\n\t\tconst filename = fileList.find((filename: string) => {\r\n\t\t\tconst { name } = pathModule.parse(filename);\r\n\t\t\tif (name === hash) {\r\n\t\t\t\treturn filename\r\n\t\t\t}\r\n\t\t});\r\n\t\tif (filename) { \r\n\t\t\tconst cacheFilePath = pathModule.resolve(this.cacheCompressedDir, filename)\r\n\t\t\treturn { isCache: true, cacheFilePath }\r\n\t\t}\r\n\t\treturn { isCache: false };\r\n\t}\r\n\t// 上传压缩并替换原图片\r\n\tcompressImage(path: string, retryIndex: number = -1) {\r\n\t\ttinify.key = this.apiKey;\r\n\t\tconst sourceData = this.fs.readFileSync(path);\r\n\t\tconst pathModule = window.require('path');\r\n\t\tconst fileInfo = pathModule.parse(path);\r\n\t\tconst hash = caculateFileHash(sourceData);\r\n\t\tlet isCache = false;\r\n\t\tif (this.cacheStatus) {\r\n\t\t\tisCache = this.checkCache(hash).isCache;\r\n\t\t}\r\n\t\tlet currentFilePos = retryIndex; // 当前压缩任务在压缩列表中的索引\r\n\t\t// 添加当前压缩任务到任务列表中,如果是重新压缩失败项则不初始化\r\n\t\tretryIndex === -1 && this.ADD_FILE_INFO({\r\n\t\t\tfileInfo: {\r\n\t\t\t\tfilename: fileInfo.base,\r\n\t\t\t\tisCache: isCache,\r\n\t\t\t\turl: sourceData.toString('base64'),\r\n\t\t\t\tmessage: isCache && \"命中缓存（请勿重复压缩）\",\r\n\t\t\t\tpath\r\n\t\t\t},\r\n\t\t\t// 获取当前压缩文件任务在fileList中的索引，用于修改异步状态\r\n\t\t\tcb: (index: number) => {\r\n\t\t\t\tcurrentFilePos = index;\r\n\t\t\t}\r\n\t\t});\r\n\t\t// 如果用户关闭了缓存模式则直接退出,返回缓存\r\n\t\tif (!isCache) {\r\n\t\t\tlet currentFileInfo: any = { currentFilePos};\r\n\t\t\ttinify.fromBuffer(sourceData).toBuffer((err: any, resultData: BufferSource) => {\r\n\t\t\t\tif (err && err.message && err.message.indexOf('Image could not be decoded') !== -1) {\r\n\t\t\t\t\t// this.$Message.error('该图片无法被解析');\r\n\t\t\t\t\tcurrentFileInfo.message = '格式无法解析';\r\n\t\t\t\t}\r\n\t\t\t\tif (err instanceof tinify.ConnectionError || err instanceof tinify.ServerError) {\r\n\t\t\t\t\tcurrentFileInfo.message = '压缩失败'\r\n\t\t\t\t} else if (err instanceof tinify.ClientError || err instanceof tinify.AccountError) {\r\n\t\t\t\t\tif (err.message.indexOf('Your monthly limit has been exceeded') >= 0) {\r\n\t\t\t\t\t\t/*该账户数目超过*/\r\n\t\t\t\t\t\t// this.$Message.error('今日图片压缩次数已用尽！');\r\n\t\t\t\t\t\tcurrentFileInfo.message = '今日压缩次数达到上限'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (err) {\r\n\t\t\t\t\tcurrentFileInfo.status = 2; // 0: 压缩中,1: 压缩成功,2: 错误\r\n\t\t\t\t\tthis.CHANGE_FILE_INFO(currentFileInfo);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.handleCompressed(hash, resultData, sourceData, path, fileInfo, currentFileInfo);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\tselectFile() {\r\n\t\tif (!this.apiKey) {\r\n\t\t\tthis.$Message.warning('请先填入API KEY');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.$refs.file.click();\r\n\t}\r\n\tasync fileChange(e: any) {\r\n\t\tconst files = e.target.files;\r\n\t\tif (files.length <= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tfor (let i = 0; i < files.length; i++) {\r\n\t\t\tthis.compressImage(files[i].path);\r\n\t\t}\r\n\t\tthis.$refs.file.value = '';\r\n\t\tthis.$Message.success('压缩任务已添加');\r\n\t}\r\n\thandleFolder(path: string) {\r\n\t\tconst pathModule = window.require('path');\r\n\t\ttry {\r\n\t\t\tconst fileList = this.fs.readdirSync(path);\r\n\t\t\tfileList.forEach((filename: string) => {\r\n\t\t\t\tif (isFolder(filename)) {\r\n\t\t\t\t\tthis.handleFolder(pathModule.resolve(path, filename)); // 递归遍历检查所有文件\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (isSpecificImage(filename)) {\r\n\t\t\t\t\t\tthis.compressImage(pathModule.resolve(path, filename));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t} catch (error) {\r\n\t\t\tconsole.log(error);\r\n\t\t}\r\n\t}\r\n\tinitDropTarget() {\r\n\t\tconst cardContainer:any = document.getElementsByClassName('ivu-card')[0];\r\n\t\tconst container = this.$refs.container;\r\n\t\twindow.addEventListener('ondragstart', (e: any) => {\r\n\t\t\te.preventDefault();\r\n\t\t});\r\n\t\tcontainer.addEventListener('drop', (e: any) => {\r\n\t\t\t\tcardContainer.classList.remove('card-hover');\r\n\t\t\t\tif (!this.apiKey) {\r\n\t\t\t\t\tthis.$Message.warning('请先填入API KEY');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst itemList = e.dataTransfer.files;\r\n\t\t\t\tfor (let i = 0; i < itemList.length; i++) {\r\n\t\t\t\t\tconst path = itemList[i].path;\r\n\t\t\t\t\tif (isFolder(path)) {\r\n\t\t\t\t\t\t//文件夹类型\r\n\t\t\t\t\t\tthis.handleFolder(path);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (isSpecificImage(path)) {\r\n\t\t\t\t\t\t\tthis.compressImage(path);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$Message.success('压缩任务已添加');\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t},\r\n\t\t\tfalse\r\n\t\t);\r\n\t\tconst dragEnterHandler = (e: any) => {\r\n\t\t\tcardContainer.classList.add('card-hover');\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t\tconst dragLeaveHandler = (e: any) => {\r\n\t\t\tcardContainer.classList.remove('card-hover');\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\r\n\t\tcontainer.addEventListener('dragover', dragEnterHandler);\r\n\t\tcontainer.addEventListener('dragleave', dragLeaveHandler);\r\n\t\t// this.$on('hook:destroyed',() => {\r\n\t\t// \tcontainer.removeventListener('dragover', dragEnterHandler);\r\n\t\t// \tcontainer.removeventListener('dragleave', dragLeaveHandler);\r\n\t\t// })\r\n\t}\r\n\tmounted() {\r\n\t\t// 重新压缩失败项\r\n\t\tthis.$root.$on('retryCompress', (path: string, retryIndex: number) => {\r\n\t\t\tthis.compressImage(path, retryIndex)\r\n\t\t})\r\n\t\tthis.init();\r\n\t\tthis.initDropTarget();\r\n\t}\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nimport { Cell,  Switch, CellGroup, Input, Upload, Button, Tag} from 'view-design';\r\nimport { State, Mutation } from 'vuex-class'\r\n\r\ndeclare var window: any;\r\n@Component({\r\n    components: {\r\n        ICell: Cell,\r\n        ISwitch: Switch,\r\n        CellGroup,\r\n        Input,\r\n        Upload,\r\n        Button,\r\n        Tag\r\n    },\r\n})\r\nexport default class UserConfig extends Vue {\r\n    @State cacheDir: any;\r\n    @State replaceStatus: any;\r\n    @State cacheStatus: any;\r\n    @State apiKey: any;\r\n    @Mutation 'SET_CACHE_FOLDER': any;\r\n    @Mutation 'SET_REPLACE_STATUS': any;\r\n    @Mutation 'SET_API_KEY': any;\r\n    @Mutation 'SET_CACHE_STATUS': any;\r\n    @Mutation 'LOAD_USER_CONFIG': any;\r\n    get cacheDirShowText() {\r\n        const path = window.require('path');\r\n        return path.resolve('./', this.cacheDir);\r\n    }\r\n    changeNeedCacheStatus(val: boolean) {\r\n        this.SET_CACHE_STATUS(val)\r\n    }\r\n    async openFileSelect() {\r\n        const { remote } = window.require('electron');\r\n        const result = await remote.dialog.showOpenDialog({\r\n            properties: ['openDirectory'],\r\n        })\r\n        const path = result.filePaths && result.filePaths[0]\r\n        path && this.SET_CACHE_FOLDER(path)\r\n    }\r\n    changeReplaceStatus(val: boolean) {\r\n        this.SET_REPLACE_STATUS(val)\r\n    }\r\n    registerApiKey() {\r\n        window.open('https://tinypng.com/developers', 'Register', 'nodeIntegration=no')\r\n    }\r\n    setApiKey(e: any) {\r\n        this.SET_API_KEY(e.target.value)\r\n    }\r\n    mounted() {\r\n        this.LOAD_USER_CONFIG();\r\n    }\r\n}\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-config.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-config.vue?vue&type=style&index=1&lang=scss&\"","import { render, staticRenderFns } from \"./file-list.vue?vue&type=template&id=3c6bdcb4&\"\nimport script from \"./file-list.vue?vue&type=script&lang=ts&\"\nexport * from \"./file-list.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./file-list.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport ViewUI from 'view-design';\nimport 'view-design/dist/styles/iview.css';\nimport Vuex from 'vuex';\nimport StoreData from './store/index.js';\n\nVue.use(Vuex);\nVue.use(ViewUI);\n\nconst store = new Vuex.Store(StoreData)\n\nVue.config.productionTip = false;\nnew Vue({\n  render: h => h(App),\n  store\n}).$mount(\"#app\");\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('ImgContainer'),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"配置项\")]),_c('UserConfig'),_c('Divider',{attrs:{\"orientation\":\"left\"}},[_vm._v(\"任务列表\")]),_c('FileList')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","module.exports = __webpack_public_path__ + \"img/logo.2a265867.png\";","module.exports = __webpack_public_path__ + \"img/upload.c376d20d.png\";","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./file-list.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./file-list.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./img-container.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./img-container.vue?vue&type=script&lang=ts&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./file-list.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./file-list.vue?vue&type=style&index=0&lang=scss&\"","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Vue, Component } from \"vue-property-decorator\";\r\nimport { Cell, Icon, CellGroup, Spin, Card, Button, Poptip } from \"view-design\";\r\nimport { State, Mutation } from \"vuex-class\";\r\n\r\n@Component({\r\n    components: {\r\n        Cell, Icon, CellGroup, Spin, Card, Button, Poptip\r\n    }\r\n})\r\nexport default class FileList extends Vue {\r\n    @State fileList: Array<object>;\r\n    @State failMap: Object;\r\n    @Mutation CHANGE_FILE_INFO: any;\r\n    showModel: boolean = false;\r\n    get btnText() {\r\n        if (this.fileList.length) {\r\n            let allReduceSize = 0;\r\n            this.fileList.forEach((item: any) => {\r\n                allReduceSize += item.reduceSize;\r\n            })\r\n            return `${this.fileList.length} 个压缩任务` + (allReduceSize ? `节省 ${allReduceSize} k` : '');\r\n        }\r\n        return '暂无压缩任务';\r\n    }\r\n    get needRetryErrorItem() {\r\n        return Object.keys(this.failMap).length;\r\n    }\r\n    checkIsShowLoading(item: any) {\r\n        return !item.isCache && !item.status;\r\n    }\r\n    retryAllError() {\r\n        const failList = Object.keys(this.failMap);\r\n        failList.forEach((key: any) => {\r\n            const item: any = this.fileList[key];\r\n            if (item.status === 2) {\r\n                this.CHANGE_FILE_INFO({status: 0, message: null, url: null, isCache: false, currentFilePos: key}); // 重新初始化需要压缩的项\r\n                this.$root.$emit('retryCompress', item.path, key)\r\n            }\r\n        })\r\n    }\r\n    openModel() {\r\n        this.showModel = true;\r\n    }\r\n    getUrl(item: any) {\r\n        if (item.url) {\r\n            return item.url && 'data:image/png;base64,' + item.url;\r\n        } else {\r\n            return require(\"../assets/logo.png\")\r\n        }\r\n    }\r\n}\r\n","const fs = window.require('fs')\r\nconst crypto = window.require('crypto');\r\n\r\nexport const caculateFileHash = (buffer) => {\r\n    const fsHash = crypto.createHash('md5');\r\n    fsHash.update(buffer.toString());\r\n    const hash = fsHash.digest('hex');\r\n    return hash;\r\n}\r\n\r\nexport const isSpecificImage = (path) => {\r\n    const idx = path.lastIndexOf('.');\r\n    const imageReg = /\\.(jpg|png)$/i;\r\n    if (idx >= 0 && imageReg.test(path)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const dirExist = (path) => {\r\n    return fs.existsSync(path)\r\n}\r\n\r\nexport const isFolder = (path) => {\r\n    const idx = path.lastIndexOf('.');\r\n    return idx === -1;\r\n}\r\n\r\nexport function generatorGetters(state) {\r\n    const getters = {};\r\n    if (typeof state !== 'object' || state instanceof Array) return {};\r\n    for (const key in state) {\r\n        if (Object.prototype.hasOwnProperty.call(state,key)) {\r\n            const name = key.replace(/([A-Z])/g, '_$1').toUpperCase();\r\n            getters[name] = function(state) {\r\n                return state[key];\r\n            };\r\n        }\r\n    }\r\n    return getters;\r\n}","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-config.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--14-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./user-config.vue?vue&type=script&lang=ts&\""],"sourceRoot":""}